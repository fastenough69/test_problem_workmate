# Тестовое задание
## Функциональные возможности

Флаги использования:
1. Флаг `--help` - документация использования
2. Флаг `--file ` - путь до файла, который нужно обработать
3. Флаг `--where` - условие обработки файла
4. Флаг `--agregate` - условие агрегации данных по полю
5. Флаг `--order-by` - сортировка по полю, а параметры `asc/desc` сортировка по возростанию/убыванию соответственно

## Примеры использования
Чтобы начать использование, нужно создать виртуальное окружение и установить зависимости из файла `requirements.txt`.

Пример файла для обработки
`test.csv`

```csv
name,brand,price,rating
iphone 15 pro,apple,999,4.9
galaxy s23 ultra,samsung,1199,4.8
redmi note 12,xiaomi,199,4.6
poco x5 pro,xiaomi,299,4.4
```

1. Самый простой пример использования из корня проекта:
`python3 main.py --file test.csv`
    Данная команд выведет:
    ```
    +------------------+---------+-------+--------+
    |       name       |  brand  | price | rating |
    +------------------+---------+-------+--------+
    |  iphone 15 pro   |  apple  |  999  |  4.9   |
    | galaxy s23 ultra | samsung | 1199  |  4.8   |
    |  redmi note 12   | xiaomi  |  199  |  4.6   |
    |   poco x5 pro    | xiaomi  |  299  |  4.4   |
    +------------------+---------+-------+--------+
    ```

2. Пример использования флага `--where`:
    `python3 main.py --file test.csv --where "brand=xiaomi"`
    Данный возов выведет:
    ```
    +---------------+--------+-------+--------+
    |     name      | brand  | price | rating |
    +---------------+--------+-------+--------+
    | redmi note 12 | xiaomi |  199  |  4.6   |
    |  poco x5 pro  | xiaomi |  299  |  4.4   |
    +---------------+--------+-------+--------+
    ```
    Также при применении с числовыми полями можно использовать операторы `<` и `>`.
    Например: `python3 main.py --file test.csv --where "rating>4.7"`
    Вот пример вывода:
    ```
    +------------------+---------+-------+--------+
    |       name       |  brand  | price | rating |
    +------------------+---------+-------+--------+
    |  iphone 15 pro   |  apple  |  999  |  4.9   |
    | galaxy s23 ultra | samsung | 1199  |  4.8   |
    +------------------+---------+-------+--------+
    ```

3. Пример использования флага `--agregate`:
    Данный флаг имеет опции `avg`, `max` и `min`.
    Пример использования с опцией `avg`.
    `python3 main.py --file test.csv --agregate "price=avg"`
    Пример вывода:
    ```
    +-------+
    |  avg  |
    +-------+
    | 674.0 |
    +-------+
    ```
    Пример использования с опцией `max`:
    `python3 main.py --file test.csv --agregate "price=max"`
    Пример вывода:
    ```
    +--------+
    |  max   |
    +--------+
    | 1199.0 |
    +--------+
    ```
    Пример использования с опцией `min`:
    `python3 main.py --file test.csv --agregate "price=min"`
    Пример вывода:
    ```
    +-------+
    |  min  |
    +-------+
    | 199.0 |
    +-------+
    ```
4. Пример использования флага `--order-by` с разными опциями:
    Опция `asc`:
    `python3 main.py --file test.csv --order-by "rating=asc"`
    Пример вывода:
    ```
    +------------------+---------+-------+--------+
    |       name       |  brand  | price | rating |
    +------------------+---------+-------+--------+
    |   poco x5 pro    | xiaomi  |  299  |  4.4   |
    |  redmi note 12   | xiaomi  |  199  |  4.6   |
    | galaxy s23 ultra | samsung | 1199  |  4.8   |
    |  iphone 15 pro   |  apple  |  999  |  4.9   |
    +------------------+---------+-------+--------+
    ```
    Опция `desc`:
    ```
    +------------------+---------+-------+--------+
    |       name       |  brand  | price | rating |
    +------------------+---------+-------+--------+
    |  iphone 15 pro   |  apple  |  999  |  4.9   |
    | galaxy s23 ultra | samsung | 1199  |  4.8   |
    |  redmi note 12   | xiaomi  |  199  |  4.6   |
    |   poco x5 pro    | xiaomi  |  299  |  4.4   |
    +------------------+---------+-------+--------+
    ```

Также флаги могут комбироваться при желании.
Вот пример использования:
`python3 main.py --file test.csv --where "brand=xiaomi" --order-by "price=asc"`
Пример вывода:
```
+---------------+--------+-------+--------+
|     name      | brand  | price | rating |
+---------------+--------+-------+--------+
| redmi note 12 | xiaomi |  199  |  4.6   |
|  poco x5 pro  | xiaomi |  299  |  4.4   |
+---------------+--------+-------+--------+
```

## Как запустить тесты?

Чтобы запустить тесты нужно перейти в директорию `tests` и ввести команду `pytest`.
Чтобы посмотреть покрытие тестов нужно ввести команду `pytest --cov=.. .`. И чтобы сделать html отчет нужно ввести команду `pytest --cov-report=html --cov=.. .`. В текущей директории появится папка `htmlcov` и нужно открыть файл `index.html`.
